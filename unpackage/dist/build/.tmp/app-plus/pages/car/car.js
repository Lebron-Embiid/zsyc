(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/car/car"],{"0929":function(t,s,e){"use strict";var i=e("7a29"),o=e.n(i);o.a},"7a29":function(t,s,e){},abe0:function(t,s,e){"use strict";e.r(s);var i=e("e2c2"),o=e("af55");for(var n in o)"default"!==n&&function(t){e.d(s,t,function(){return o[t]})}(n);e("0929");var a=e("2877"),c=Object(a["a"])(o["default"],i["a"],i["b"],!1,null,"2c71233c",null);s["default"]=c.exports},af55:function(t,s,e){"use strict";e.r(s);var i=e("c14a"),o=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(s,t,function(){return i[t]})}(n);s["default"]=o.a},c14a:function(t,s,e){"use strict";(function(t,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=function(){return e.e("components/uni-nav-bar/uni-nav-bar").then(e.bind(null,"3ea1"))},a={data:function(){return{sumPrice:"0.00",headerPosition:"fixed",headerTop:null,statusTop:null,showHeader:!0,selectedList:[],numList:[],isAllselected:!1,goods:[],goodsList:[],theIndex:null,oldIndex:null,isStop:!1,url:""}},components:{uniNavBar:n},onPageScroll:function(t){this.headerPosition=t.scrollTop>=0?"fixed":"absolute",this.headerTop=t.scrollTop>=0?null:0,this.statusTop=t.scrollTop>=0?null:-this.statusHeight+"px"},onPullDownRefresh:function(){setTimeout(function(){t.stopPullDownRefresh()},1e3)},onLoad:function(){this.url=this.$http.url,this.showHeader=!1,this.statusHeight=plus.navigator.getStatusbarHeight()},onShow:function(){var t=this;this.$http.getCar().then(function(s){var e=[],i=s.data.list,n=[];for(var a in i)n.push(i[a]);t.goods=n;for(var c=0;c<n.length;c++)e.push({gid:n[c].gid,name:n[c].name,num:n[c].num,pic:n[c].pic,price:n[c].price,selected:!1});t.selectedList=[],t.isAllselected=!1,t.goodsList=e,t.sum(),console.log(o(t.goodsList," at pages\\car\\car.vue:136"))})},methods:{joinGoods:function(t){for(var s=this.goodsList.length,e=!1,o=0;o<s;o++){var n=this.goodsList[o];if(n.id==t.id){this.goodsList[o].number++,e=!0;break}}e||this.goodsList[i].unshift(t)},touchStart:function(t,s){s.touches.length>1?this.isStop=!0:(this.oldIndex=this.theIndex,this.theIndex=null,this.initXY=[s.touches[0].pageX,s.touches[0].pageY])},touchMove:function(t,s){var e=this;if(s.touches.length>1)this.isStop=!0;else{var i=s.touches[0].pageX-this.initXY[0],o=s.touches[0].pageY-this.initXY[1];this.isStop||Math.abs(i)<5||(Math.abs(o)>Math.abs(i)?this.isStop=!0:i<0?(this.theIndex=t,this.isStop=!0):i>0&&null!=this.theIndex&&this.oldIndex==this.theIndex&&(this.oldIndex=t,this.theIndex=null,this.isStop=!0,setTimeout(function(){e.oldIndex=null},150)))}},touchEnd:function(t,s){this.isStop=!1},toGoods:function(s){console.log(o(s," at pages\\car\\car.vue:215")),t.navigateTo({url:"/pages/index/detail?cid="+s})},toConfirmation:function(){for(var s=this,e=[],i=this.goodsList.length,o=0;o<i;o++)this.goodsList[o].selected&&e.push(this.goodsList[o]);e.length<1?t.showToast({title:"请选择商品",icon:"none"}):this.$Debounce.canDoFunction({key:"addOrder",time:1500,success:function(){t.navigateTo({url:"/pages/index/confirmation?id="+JSON.stringify(s.selectedList)+"&type=1"})}})},deleteGoods:function(t){var s=this,e=[];e.push(t),console.log(o(JSON.stringify(e)," at pages\\car\\car.vue:253")),this.$http.delCar({g_id:JSON.stringify(e)}).then(function(t){s.$api.msg(t.data.message),s.$http.getCar().then(function(t){var e=[],i=t.data.list,n=[];for(var a in i)n.push(i[a]);console.log(o(n," at pages\\car\\car.vue:265"));for(var c=0;c<n.length;c++)e.push({gid:n[c].gid,name:n[c].name,num:n[c].num,pic:n[c].pic,price:n[c].price,selected:!1});s.goodsList=e,s.sum()})}),this.sum(),this.oldIndex=null,this.theIndex=null},deleteList:function(){var s=this,e=this,i=(e.selectedList.length,"");t.showModal({title:"删除提示",content:"确定删除选中的商品？",success:function(t){t.confirm&&(1==e.isAllselected?(i=1,e.$http.delCar({is_all:i}).then(function(t){e.$api.msg(t.data.message),e.$http.getCar().then(function(t){var s=[],i=t.data.list,n=[];for(var a in i)n.push(i[a]);console.log(o(n," at pages\\car\\car.vue:307"));for(var c=0;c<n.length;c++)s.push({gid:n[c].gid,name:n[c].name,num:n[c].num,pic:n[c].pic,price:n[c].price,selected:!1});e.goodsList=s,e.sum()})})):(i=0,e.$http.delCar({g_id:JSON.stringify(e.selectedList)}).then(function(t){e.$api.msg(t.data.message),e.$http.getCar().then(function(t){var s=[],i=t.data.list,n=[];for(var a in i)n.push(i[a]);console.log(o(n," at pages\\car\\car.vue:335"));for(var c=0;c<n.length;c++)s.push({gid:n[c].gid,name:n[c].name,num:n[c].num,pic:n[c].pic,price:n[c].price,selected:!1});e.goodsList=s,e.sum()})})),console.log(o(e.selectedList," at pages\\car\\car.vue:351")),e.selectedList=[],e.isAllselected=e.selectedList.length==e.goodsList.length&&s.goodsList.length>0,e.sum())}})},selected:function(t){for(var s in console.log(o(t," at pages\\car\\car.vue:366")),this.goodsList)this.numList[t]=this.goodsList[s].num;console.log(o(this.goodsList[t].selected," at pages\\car\\car.vue:370")),this.goodsList[t].selected=!this.goodsList[t].selected;var e=this.selectedList.indexOf(this.goodsList[t].gid);e>-1?this.selectedList.splice(e,1):this.selectedList.push(this.goodsList[t].gid),this.isAllselected=this.selectedList.length==this.goodsList.length,this.sum()},allSelect:function(){for(var t=this.goodsList.length,s=[],e=0;e<t;e++)this.goodsList[e].selected=!this.isAllselected,s.push(this.goodsList[e].gid);this.selectedList=this.isAllselected?[]:s,this.isAllselected=!this.isAllselected,this.sum()},sub:function(t){console.log(o(t," at pages\\car\\car.vue:396")),this.goodsList[t].num<=1||(this.goodsList[t].num--,this.$http.editCar({g_id:this.goodsList[t].gid,num:this.goodsList[t].num}).then(function(t){}),this.sum())},add:function(t){this.goodsList[t].num++,this.$http.editCar({g_id:this.goodsList[t].gid,num:this.goodsList[t].num}).then(function(t){}),this.sum()},sumBlur:function(t){console.log(o(t," at pages\\car\\car.vue:421")),this.$http.editCar({g_id:this.goodsList[t].gid,num:this.goodsList[t].num}).then(function(t){})},sum:function(t,s){this.sumPrice=0;for(var e=this.goodsList.length,i=0;i<e;i++)this.goodsList[i].selected&&(this.sumPrice=t&&i==s?this.sumPrice+t.detail.value*this.goodsList[i].price:this.sumPrice+this.goodsList[i].num*this.goodsList[i].price);this.sumPrice=this.sumPrice.toFixed(2)},discard:function(){}}};s.default=a}).call(this,e("6e42")["default"],e("0de9")["default"])},d6ab:function(t,s,e){"use strict";(function(t){e("a6c6"),e("921b");i(e("66fd"));var s=i(e("abe0"));function i(t){return t&&t.__esModule?t:{default:t}}t(s.default)}).call(this,e("6e42")["createPage"])},e2c2:function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement;t._self._c},o=[];e.d(s,"a",function(){return i}),e.d(s,"b",function(){return o})}},[["d6ab","common/runtime","common/vendor"]]]);